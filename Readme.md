# Dotcube Android App

The recommended way is to build and deploy the App with our Github Action.
It deploys version tagged APKs to [dotscene F-Droid](https://f-droid.dotscene.com/fdroid/repo).

Please follow the respective instructions in the [wiki](https://github.com/dotscene-gmbh/dotcube/wiki/install_app).

Otherwise, if you want to build locally and/or debug the appâ€¦


## Local build

### Setup android studio
- install android studio
- start android studio and add `dotcube/app/DroneController` as project
- if build fails due to license issue run `~/Android/Sdk/tools/bin/sdkmanager --licenses`

### Easy: Build APKs with fastlane
- Checkout this repo
- Run `./build_docker.sh`
- Run `docker compose up`

The resulting APKs can be found in the `output` folder ðŸš€

### BackToTheRoots: Building APKs with android studio
- select build variant: Build > Select Build Variant...
- until https://github.com/dotscene-gmbh/dotcube/issues/100 is resolved, build "gpsDebug" and "no_gpsDebug" build variant
- Build > Build Bundle(s) / APK(s) > Build APK(s)
- For new releases copy App(s) to the according dotcube image version folder on `fileserver/projects_intern/dotcube/img/dotcube...`

### Install to phone from commandline
 - connect phone and enable USB debugging
 - run the app_deployment [script](https://github.com/dotscene-gmbh/dotcube/blob/master/scripts/app_deployment/deploy.sh)
   - `cd ~/repos/int/docube/scripts/app_deployment`
   - `./deploy.sh` optional with `-a "path/to/apk"` and `-v "path/to/video"`
 - or install it manually
   - run `adb install app-debug.apk`
   - copy the manual video `adb push manual.mp4 /sdcard/Movies/video.mp4`


## Adding a new license

The license.dat file is automatically generated by [compile-licenses.py](https://github.com/dotscene-gmbh/dotcube/blob/devel/documentation/licenses/compile-licenses.py). To add a license add a .txt file to the licenses, with a descriptor header and the full license text. See old licenses for format.